<!DOCTYPE html>
<html>

<head>
	<title>PHPUnitDiff</title>
	
	<!-- CDSEVM Requirements-->
	<script src="References/knockout-2.2.0.js"></script>
	<script src="References/knockout.mapping.js"></script>
	<script src="References/knockout.validation.js"></script>
	<script src="References/knockout.command.js"></script>
	
	<script src="References/jquery-1.8.2.min.js"></script>
	<script src="References/jquery-ui-1.9.2.custom.min.js"></script>
	<script src="References/knockout-sortable.js"></script>

	<!--App Code-->
	<script src="PHPUnitDiffVM.js"></script>

	
	<link rel="stylesheet" type="text/css" href="PHPUnitDiff.css">

</head>


<body>
	<div id="DropZone" data-bind="event: { dragenter: NoOp, dragexit: NoOp, dragover: NoOp, drop : DropLogFile }">
		Drop Log Files Here
	</div>

	<div data-bind="visible: TestResults().length > 0">
		
		<div id="TestNames" >
			<span>Filter:</span>
			<input type="text" data-bind="value: TestFilter, valueUpdate: 'afterkeydown'"></input>
			<button data-bind="click: function(){ TestFilter(''); }">clear</button>
			<!-- ko foreach: $root.TestNames -->
				<div class="Cell" data-bind="text: $data"></div>
			<!-- /ko -->
		</div>

		<div data-bind="sortable: TestResults" >
			<div class="TestResults">
				<div class="ResultNames" data-bind="text: ID"></div>
				<!-- ko foreach: $root.TestNames -->
					<div class="Cell" >
						<div class="Delta" data-bind="css: { failed: $parent[$data].status != 'pass' || $root.BaseResult()[$data].status != 'pass', faster :  ($root.BaseResult()[$data].time - $parent[$data].time) > 0, slower :  ($root.BaseResult()[$data].time - $parent[$data].time) < 0}">
							<!-- ko if: $parent[$data].status == 'pass' && $root.BaseResult()[$data].status == 'pass' -->
								<span data-bind="text: Math.abs(($root.BaseResult()[$data].time - $parent[$data].time) / $root.BaseResult()[$data].time * 100).toFixed(2) 
							+ '%'"></span>
							<!-- /ko -->
							<!-- ko if: $parent[$data].status != 'pass' -->
								<span>failed</span>
							<!-- /ko -->
							<!-- ko if: $parent[$data].status == 'pass' && $root.BaseResult()[$data].status != 'pass' -->
								<span>base fail</span>
							<!-- /ko -->		
						</div>
						<div class="TimeData" data-bind="text: $parent[$data].time.toFixed(4)"></div>
					</div>
				<!-- /ko -->
			</div>		
		
		</div>
	</div>

	


</body>

<script>
var vm = new PHPUnitDiffVM();
ko.applyBindings(vm);
</script>

</html>